<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Sign up â€¢ Project Management</title>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
	<script src="https://cdn.tailwindcss.com"></script>
	<link rel="stylesheet" href="/styles.css" />
</head>
<body class="min-h-screen bg-gradient-to-br from-slate-50 via-white to-slate-100 grid place-items-center">
	<div class="card w-full max-w-xl p-0 overflow-hidden">
		<div class="grid md:grid-cols-[1.1fr_.9fr]">
			<div class="p-6 sm:p-8">
				<h1 class="text-2xl font-semibold text-slate-900 mb-1">Create account</h1>
				<p class="text-slate-500 mb-6">Join as manager or employee</p>
				<form id="signupForm" class="grid gap-3">
					<input id="username" class="input" type="text" placeholder="Username" required />
					<input id="password" class="input" type="password" placeholder="Password" required />
					<select id="role" class="input">
						<option value="EMPLOYEE">Employee</option>
						<option value="MANAGER">Manager</option>
					</select>
					<button class="btn-primary w-fit">Sign up</button>
				</form>
				<p id="msg" class="text-sm text-red-600 mt-2 hidden"></p>
				<p class="text-sm text-slate-600 mt-6">Already have an account? <a class="text-slate-900 underline" href="/login.html">Login</a></p>
			</div>
			<div class="bg-slate-900 text-slate-100 p-6 sm:p-8">
				<h3 class="font-semibold mb-2">Roles</h3>
				<p class="text-slate-300 text-sm">Managers assign tasks. Employees see and update tasks.</p>
			</div>
		</div>
	</div>

	<script>
	const form = document.getElementById('signupForm');
	form.addEventListener('submit', async (e) => {
		e.preventDefault();
		const username = document.getElementById('username').value.trim();
		const password = document.getElementById('password').value;
		const role = document.getElementById('role').value;
		try {
			const res = await fetch('/api/auth/register', {method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({username, password, roles:[role]})});
			if(!res.ok) throw new Error(await res.text());
			location.href = '/login.html';
		} catch (err) {
			document.getElementById('msg').textContent = 'Signup failed: '+ (err.message || '');
			document.getElementById('msg').classList.remove('hidden');
		}
	});
	</script>
</body>
</html>



